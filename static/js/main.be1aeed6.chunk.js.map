{"version":3,"sources":["components/Pointing.png","components/AudioMuting.svg","components/AudioMutingDisabled.svg","components/CameraMuting.svg","components/CameraMutingDisabled.svg","components/MapMuting.svg","components/MapMutingDisabled.svg","components/CameraSwitching.svg","lib/video.tsx","actions.ts","reducer.ts","store.ts","components/Participation.tsx","components/AudienceItem.tsx","components/AudienceList.tsx","components/MapPanel.tsx","components/Pointing.tsx","components/Presenter.tsx","components/AudioMuting.tsx","components/CameraMuting.tsx","components/MapMuting.tsx","components/CameraSwitching.tsx","components/ToolItem.tsx","components/ToolList.tsx","components/Room.tsx","components/App.tsx","index.tsx"],"names":["module","exports","currentIndex","currentStream","getDevices","a","navigator","mediaDevices","enumerateDevices","devices","filter","device","kind","nextVideoStream","getTracks","forEach","track","stop","nextIndex","length","nextDevice","deviceId","exact","getUserMedia","audio","video","actionCreator","actionCreatorFactory","AddPeerAction","AddPointingAction","async","ParticipateAction","RemovePeerAction","RemovePointingAction","SelectPeerAction","SetPointintAcrion","SetTransformAcrion","SwitchCameraAction","ToggleAudioMutingAction","ToggleCameraMutingAction","ToggleMapMutingAction","InitializeMapAction","OnPeerSelectedAction","OnTransformChangedAction","pointingTimerMap","Map","addPointing","peerId","x","y","dispatch","params","started","clearTimeout","get","timerId","setTimeout","set","done","result","error","failed","toggleMapMuting","getState","state","isEnabled","isMapEnabled","InitializeMap","key","lat","lng","defaultZoom","onStream","store","stream","presenter","room","send","type","onData","data","scale","initialState","audiences","isAudioEnabled","isCameraEnabled","pointings","transform","reducer","reducerWithInitialState","case","audience","_selectedPeerId","Object","assign","p","find","localPeer","localStream","id","map","createStore","combineReducers","applyMiddleware","thunk","Participation","props","_onClick","bind","url","URL","document","searchParams","mapkey","network","this","participate","setState","isParticipating","className","onClick","disabled","React","PureComponent","connect","roomId","Promise","r","peer","Peer","on","joinRoom","mode","AudienceItem","_videoRef","createRef","selectPeer","current","srcObject","playsInline","play","_updateVideo","isMuted","isSelected","muted","ref","AudienceList","MapPanel","bootstrapURLKeys","defaultCenter","Pointing","angle","radian","Math","PI","styles","left","top","transformOrigin","videoStyles","style","src","logo","alt","Presenter","_panStopTimer","_onPanningStop","_onZoomChange","closest","test","userAgent","toLowerCase","e","target","layerX","layerY","clientWidth","clientHeight","setPointing","window","match","translate","translateMatch","positionX","parseFloat","positionY","area","_getVideoArea","setTransform","offsetLeft","offsetTop","atan2","addEventListener","prevProps","_amIPresenter","settings","_isMobile","onPanningStop","onZoomChange","pan","onPanning","doubleClick","_renderPointings","AudioMuting","logoEnabled","logoDisabled","toggleAudioMuting","getAudioTracks","enabled","CameraMuting","toggleCameraMuting","getVideoTracks","MapMuting","CameraSwitching","switchCamera","replaceStream","ToolItem","children","ToolList","Room","App","Fragment","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.be1aeed6.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Pointing.c29bd356.png\";","module.exports = __webpack_public_path__ + \"static/media/AudioMuting.728874bb.svg\";","module.exports = __webpack_public_path__ + \"static/media/AudioMutingDisabled.288ed0b3.svg\";","module.exports = __webpack_public_path__ + \"static/media/CameraMuting.6dfcbc6b.svg\";","module.exports = __webpack_public_path__ + \"static/media/CameraMutingDisabled.cd67b22a.svg\";","module.exports = __webpack_public_path__ + \"static/media/MapMuting.347851c3.svg\";","module.exports = __webpack_public_path__ + \"static/media/MapMutingDisabled.7281d985.svg\";","module.exports = __webpack_public_path__ + \"static/media/CameraSwitching.e1a723d2.svg\";","let currentIndex = -1;\nlet currentStream: any = null;\n\nasync function getDevices() {\n  const devices = await navigator.mediaDevices.enumerateDevices();\n  return devices.filter(device => device.kind === \"videoinput\");\n}\n\nexport async function nextVideoStream() {\n  if (currentStream) {\n    currentStream.getTracks().forEach((track: any) => {\n      track.stop();\n    });\n  }\n\n  const devices = await getDevices();\n  const nextIndex =\n    currentIndex === devices.length - 1 ? 0 : currentIndex + 1;\n  const nextDevice = devices[nextIndex];\n  const deviceId = { exact: nextDevice.deviceId };\n  currentIndex = nextIndex;\n\n  currentStream = await navigator.mediaDevices.getUserMedia({\n    audio: true,\n    video: { deviceId },\n  });\n  return currentStream;\n}\n","import { AnyAction } from \"redux\";\nimport { ThunkDispatch } from \"redux-thunk\";\n\nimport Peer from \"skyway-js\";\nimport { actionCreatorFactory } from \"../node_modules/typescript-fsa\";\n\nimport { nextVideoStream } from \"./lib/video\";\nimport { TStore } from \"./store\";\n\nconst actionCreator = actionCreatorFactory();\n\nexport const AddPeerAction = actionCreator<{\n  peerId: string;\n  stream: any;\n}>(\"ADD_PEER\");\nexport const AddPointingAction = actionCreator.async<\n  { peerId: string; x: number; y: number },\n  { peerId: string; x: number; y: number },\n  { error: any }\n>(\"ADD_POINTING\");\nexport const ParticipateAction = actionCreator.async<\n  {},\n  {\n    localPeer: Peer;\n    localStream: MediaStream;\n    room: any;\n  },\n  { error: any }\n>(\"PARTICIPATE\");\nexport const RemovePeerAction = actionCreator<{ peerId: string }>(\n  \"REMOVE_PEER\"\n);\nexport const RemovePointingAction = actionCreator<{ peerId: string }>(\n  \"REMOVE_POINTING\"\n);\nexport const SelectPeerAction = actionCreator.async<{}, {}, { error: any }>(\n  \"SELECT_PEER\"\n);\nexport const SetPointintAcrion = actionCreator.async<{}, {}, { error: any }>(\n  \"SET_POINTING\"\n);\nexport const SetTransformAcrion = actionCreator.async<{}, {}, { error: any }>(\n  \"SET_TRANSFORM\"\n);\nexport const SwitchCameraAction = actionCreator.async<\n  {},\n  { localStream: MediaStream },\n  { error: any }\n>(\"SWITCH_CAMERA\");\nexport const ToggleAudioMutingAction = actionCreator.async<\n  {},\n  { isEnabled: boolean },\n  { error: any }\n>(\"TOGGLE_AUDIO_MUTING\");\nexport const ToggleCameraMutingAction = actionCreator.async<\n  {},\n  { isEnabled: boolean },\n  { error: any }\n>(\"TOGGLE_CAMERA_MUTING\");\nexport const ToggleMapMutingAction = actionCreator.async<\n  {},\n  { isEnabled: boolean },\n  { error: any }\n>(\"TOGGLE_MAP_MUTING\");\nexport const InitializeMapAction = actionCreator.async<\n  {},\n  {\n    key: string;\n    lat: number;\n    lng: number;\n    defaultZoom: number;\n  },\n  { error: any }\n>(\"INITIALIZE_MAP\");\nexport const OnPeerSelectedAction = actionCreator<{\n  peerId: string;\n}>(\"ON_PEER_SELECTED\");\nexport const OnTransformChangedAction = actionCreator<{\n  x: number;\n  y: number;\n  scale: number;\n}>(\"ON_TRANSFORM_CHANGED\");\n\nconst pointingTimerMap = new Map();\n\nexport function participate(\n  key: string,\n  network: \"mesh\" | \"sfu\",\n  roomId: string\n) {\n  return async (\n    dispatch: ThunkDispatch<TStore, void, AnyAction>,\n    getState: () => TStore\n  ) => {\n    const params = { key, network, roomId };\n    try {\n      dispatch(ParticipateAction.started(params));\n\n      const localStream = await nextVideoStream();\n      const localPeer: Peer = await new Promise(r => {\n        const peer = new Peer({ key: key });\n        peer.on(\"open\", () => r(peer));\n      });\n\n      const room = localPeer.joinRoom(roomId, {\n        mode: network,\n        stream: localStream,\n      });\n\n      room.on(\"peerLeave\", peerId => dispatch(RemovePeerAction({ peerId })));\n      room.on(\"stream\", stream => onStream(dispatch, getState(), stream));\n      room.on(\"data\", ({ data }) => onData(dispatch, data));\n\n      const result = {\n        localPeer,\n        localStream,\n        room,\n      };\n\n      dispatch(ParticipateAction.done({ result, params }));\n    } catch (error) {\n      dispatch(ParticipateAction.failed({ error, params }));\n    }\n  };\n}\n\nfunction addPointing(peerId: string, x: number, y: number) {\n  return async (dispatch: ThunkDispatch<TStore, void, AnyAction>) => {\n    const params = { peerId, x, y };\n\n    try {\n      dispatch(AddPointingAction.started(params));\n\n      clearTimeout(pointingTimerMap.get(peerId));\n      const timerId = setTimeout(\n        () => dispatch(RemovePointingAction({ peerId })),\n        4000\n      );\n      pointingTimerMap.set(peerId, timerId);\n\n      dispatch(AddPointingAction.done({ result: params, params }));\n    } catch (error) {\n      dispatch(AddPointingAction.failed({ error, params }));\n    }\n  };\n}\n\nexport function selectPeer(peerId: string) {\n  return async (\n    dispatch: ThunkDispatch<TStore, void, AnyAction>,\n    getState: () => TStore\n  ) => {\n    const params = {};\n\n    try {\n      dispatch(SelectPeerAction.started(params));\n\n      const room = getState()?.state.room;\n      if (room) {\n        room.send({ type: \"peer-selected\", peerId });\n        // As the room.send does not send to the local peer, update manually.\n        dispatch(OnPeerSelectedAction({ peerId }));\n      }\n\n      dispatch(SelectPeerAction.done({ result: {}, params }));\n    } catch (error) {\n      dispatch(SelectPeerAction.failed({ error, params }));\n    }\n  };\n}\n\nexport function setPointing(x: number, y: number) {\n  return async (\n    dispatch: ThunkDispatch<TStore, void, AnyAction>,\n    getState: () => TStore\n  ) => {\n    const params = {};\n\n    try {\n      dispatch(SetPointintAcrion.started(params));\n\n      const state = getState()?.state;\n\n      const peerId = state.localPeer?.id;\n\n      if (peerId) {\n        state.room?.send({ type: \"pointing-added\", peerId, x, y });\n        // As the room.send does not send to the local peer, update manually.\n        dispatch(addPointing(peerId, x, y));\n      }\n\n      dispatch(SetPointintAcrion.done({ result: {}, params }));\n    } catch (error) {\n      dispatch(SetPointintAcrion.failed({ error, params }));\n    }\n  };\n}\n\nexport function setTransform(x: number, y: number, scale: number) {\n  return async (\n    dispatch: ThunkDispatch<TStore, void, AnyAction>,\n    getState: () => TStore\n  ) => {\n    const params = {};\n\n    try {\n      dispatch(SetTransformAcrion.started(params));\n\n      const state = getState()?.state;\n      state.room?.send({ type: \"transform-changed\", x, y, scale });\n\n      dispatch(SetTransformAcrion.done({ result: {}, params }));\n    } catch (error) {\n      dispatch(SetTransformAcrion.failed({ error, params }));\n    }\n  };\n}\n\nexport function switchCamera() {\n  return async (\n    dispatch: ThunkDispatch<TStore, void, AnyAction>,\n    getState: () => TStore\n  ) => {\n    const params = {};\n\n    try {\n      dispatch(SwitchCameraAction.started(params));\n\n      const state = getState()?.state;\n\n      // Close previouse stream.\n      for (const track of state?.localStream?.getTracks() || []) {\n        track.enabled = false;\n      }\n\n      const localStream = await nextVideoStream();\n\n      // parameter of replaceStream is defined as MediaSource, but localStream is MediaStream.\n      // I don't know why..\n      (state?.room as any)?.replaceStream(localStream);\n\n      const result = { localStream };\n\n      dispatch(SwitchCameraAction.done({ result, params }));\n    } catch (error) {\n      dispatch(SwitchCameraAction.failed({ error, params }));\n    }\n  };\n}\n\nexport function toggleAudioMuting() {\n  return async (\n    dispatch: ThunkDispatch<TStore, void, AnyAction>,\n    getState: () => TStore\n  ) => {\n    const params = {};\n\n    try {\n      dispatch(ToggleAudioMutingAction.started(params));\n\n      const state = getState()?.state;\n      const isEnabled = !state?.isAudioEnabled;\n      const localStream = state?.localStream;\n\n      for (const track of localStream?.getAudioTracks() || []) {\n        track.enabled = isEnabled;\n      }\n\n      const result = { isEnabled };\n\n      dispatch(ToggleAudioMutingAction.done({ result, params }));\n    } catch (error) {\n      dispatch(ToggleAudioMutingAction.failed({ error, params }));\n    }\n  };\n}\n\nexport function toggleCameraMuting() {\n  return async (\n    dispatch: ThunkDispatch<TStore, void, AnyAction>,\n    getState: () => TStore\n  ) => {\n    const params = {};\n\n    try {\n      dispatch(ToggleCameraMutingAction.started(params));\n\n      const state = getState()?.state;\n      const isEnabled = !state?.isCameraEnabled;\n      const localStream = state?.localStream;\n\n      for (const track of localStream?.getVideoTracks() || []) {\n        track.enabled = isEnabled;\n      }\n\n      const result = { isEnabled };\n\n      dispatch(ToggleCameraMutingAction.done({ result, params }));\n    } catch (error) {\n      dispatch(ToggleCameraMutingAction.failed({ error, params }));\n    }\n  };\n}\nexport function toggleMapMuting() {\n  return async (\n    dispatch: ThunkDispatch<TStore, void, AnyAction>,\n    getState: () => TStore\n  ) => {\n    const params = {};\n\n    try {\n      dispatch(ToggleMapMutingAction.started(params));\n\n      const state = getState()?.state;\n      const isEnabled = !state?.isMapEnabled;\n\n      const result = { isEnabled };\n\n      dispatch(ToggleMapMutingAction.done({ result, params }));\n    } catch (error) {\n      dispatch(ToggleMapMutingAction.failed({ error, params }));\n    }\n  };\n}\n\nexport function InitializeMap(\n  key: string,\n  lat: number,\n  lng: number,\n  defaultZoom: number\n) {\n  return async (dispatch: ThunkDispatch<TStore, void, AnyAction>) => {\n    const params = {};\n\n    try {\n      dispatch(InitializeMapAction.started(params));\n\n      const result = { key, lat, lng, defaultZoom };\n      dispatch(InitializeMapAction.done({ result, params }));\n    } catch (error) {\n      dispatch(InitializeMapAction.failed({ error, params }));\n    }\n  };\n}\n\nfunction onStream(\n  dispatch: ThunkDispatch<TStore, void, AnyAction>,\n  store: TStore,\n  stream: any\n) {\n  dispatch(AddPeerAction({ peerId: stream.peerId, stream }));\n  // Tell who is a presenter now, to peer joined newly.\n  if (store.state.presenter) {\n    store.state.room?.send({\n      type: \"peer-selected\",\n      peerId: store.state.presenter.peerId,\n    });\n  }\n}\n\nfunction onData(dispatch: ThunkDispatch<TStore, void, AnyAction>, data: any) {\n  switch (data.type) {\n    case \"peer-selected\": {\n      dispatch(OnPeerSelectedAction({ peerId: data.peerId }));\n      break;\n    }\n    case \"pointing-added\": {\n      dispatch(addPointing(data.peerId, data.x, data.y));\n      break;\n    }\n    case \"transform-changed\": {\n      dispatch(\n        OnTransformChangedAction({ x: data.x, y: data.y, scale: data.scale })\n      );\n      break;\n    }\n  }\n}\n","import { reducerWithInitialState } from \"typescript-fsa-reducers\";\n\nimport {\n  AddPeerAction,\n  AddPointingAction,\n  ParticipateAction,\n  RemovePeerAction,\n  RemovePointingAction,\n  SwitchCameraAction,\n  ToggleAudioMutingAction,\n  ToggleCameraMutingAction,\n  ToggleMapMutingAction,\n  OnPeerSelectedAction,\n  OnTransformChangedAction,\n  InitializeMapAction,\n} from \"./actions\";\nimport { Map, Member, Pointing, Transform } from \"./types\";\n\nexport interface IState {\n  audiences: Member[];\n  isAudioEnabled: boolean;\n  isCameraEnabled: boolean;\n  isMapEnabled: boolean;\n  localPeer?: Peer;\n  localStream?: MediaStream;\n  room?: SFURoom | MeshRoom;\n  pointings: Pointing[];\n  map?: Map;\n  presenter?: Member;\n  transform: Transform;\n  // Don't use this. The reason why we need this variable is because the `peer-selected`\n  // event and AddPeerAction timing after joining the room is racing.\n  _selectedPeerId?: string;\n}\n\nconst initialState: IState = {\n  audiences: [],\n  isAudioEnabled: true,\n  isCameraEnabled: true,\n  isMapEnabled: true,\n  pointings: [],\n  transform: { x: 0, y: 0, scale: 1 },\n};\n\nexport const reducer = reducerWithInitialState(initialState)\n  .case(AddPeerAction, (state, { peerId, stream }) => {\n    const audience = { peerId, stream };\n    const audiences = [...state.audiences, audience];\n\n    // As the presenter peer joined after firing `peer-selected` event, set as a presenter.\n    const presenter =\n      state._selectedPeerId === peerId ? audience : state.presenter;\n    const transform =\n      presenter === state.presenter ? state.transform : initialState.transform;\n\n    return Object.assign({}, state, { audiences, presenter, transform });\n  })\n  .case(AddPointingAction.done, (state, { result }) => {\n    const { peerId, x, y } = result;\n    const pointings = state.pointings.filter(p => p.audience.peerId !== peerId);\n    const audience = state.audiences.find(a => a.peerId === peerId);\n\n    return Object.assign({}, state, {\n      pointings: [...pointings, { audience, x, y }],\n    });\n  })\n  .case(ParticipateAction.done, (state, { result }) => {\n    const { localPeer, localStream, room } = result;\n\n    const audience = {\n      peerId: localPeer.id,\n      stream: localStream,\n    };\n    const audiences = [audience];\n\n    return Object.assign({}, state, {\n      audiences,\n      localPeer,\n      localStream,\n      room,\n    });\n  })\n  .case(RemovePeerAction, (state, { peerId }) => {\n    const audiences = state.audiences.filter(a => a.peerId !== peerId);\n    const presenter =\n      state.presenter?.peerId === peerId ? null : state.presenter;\n\n    return Object.assign({}, state, { audiences, presenter });\n  })\n  .case(RemovePointingAction, (state, { peerId }) => {\n    const pointings = state.pointings.filter(p => p.audience.peerId !== peerId);\n\n    return Object.assign({}, state, { pointings });\n  })\n  .case(SwitchCameraAction.done, (state, { result }) => {\n    const { localStream } = result;\n    const peerId = state.localPeer?.id;\n\n    const audiences = state.audiences.map(a =>\n      a.peerId === peerId ? { peerId, stream: localStream } : a\n    );\n\n    const presenter =\n      state.presenter?.peerId === peerId\n        ? { peerId, stream: localStream }\n        : state.presenter;\n\n    return Object.assign({}, state, { audiences, localStream, presenter });\n  })\n  .case(ToggleAudioMutingAction.done, (state, { result }) => {\n    const { isEnabled } = result;\n\n    return Object.assign({}, state, { isAudioEnabled: isEnabled });\n  })\n  .case(ToggleCameraMutingAction.done, (state, { result }) => {\n    const { isEnabled } = result;\n\n    return Object.assign({}, state, { isCameraEnabled: isEnabled });\n  })\n  .case(ToggleMapMutingAction.done, (state, { result }) => {\n    const { isEnabled } = result;\n\n    return Object.assign({}, state, { isMapEnabled: isEnabled });\n  })\n  .case(OnPeerSelectedAction, (state, { peerId }) => {\n    const presenter = state.audiences.find(a => a.peerId === peerId);\n\n    return Object.assign({}, state, {\n      presenter,\n      transform: initialState.transform,\n      _selectedPeerId: peerId,\n    });\n  })\n  .case(InitializeMapAction.done, (state, { result }) => {\n    const { key, lat, lng, defaultZoom } = result;\n    return Object.assign({}, state, { map: { key, lat, lng, defaultZoom } });\n  })\n  .case(OnTransformChangedAction, (state, { x, y, scale }) => {\n    return Object.assign({}, state, { transform: { x, y, scale } });\n  });\n","import { combineReducers, createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport { reducer, IState } from \"./reducer\";\n\nexport type TStore = {\n  state: IState;\n};\n\nexport const store = createStore(\n  combineReducers<TStore>({\n    state: reducer,\n  }),\n  {},\n  applyMiddleware(thunk)\n);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { ThunkDispatch } from \"redux-thunk\";\nimport { AnyAction } from \"redux\";\n\nimport { TStore } from \"../store\";\nimport { participate } from \"../actions\";\nimport { InitializeMap } from \"../actions\";\n\nimport \"./Participation.css\";\n\ninterface IProps {\n  participate: any;\n  InitializeMap: any;\n}\n\ninterface IState {\n  key: string | null;\n  mapkey: string | null;\n  lat: number;\n  lng: number;\n  defaultZoom: number;\n  network: string | null;\n  room: string | null;\n  error: string | null;\n  isParticipating?: boolean;\n}\n\nclass Participation extends React.PureComponent<IProps, IState> {\n  constructor(props: IProps) {\n    super(props);\n    this._onClick = this._onClick.bind(this);\n\n    const url = new URL(document.URL);\n    const key = url.searchParams.get(\"key\");\n    const mapkey = url.searchParams.get(\"mapkey\");\n    const lat = 35.7139014;\n    const lng = 139.7601034;\n    const defaultZoom = 12;\n    const network = url.searchParams.get(\"network\");\n    const room = url.searchParams.get(\"room\");\n\n    let error = null;\n    if (!key || !network || !room) {\n      error = \"No specific key, network or room\";\n    } else if (network !== \"sfu\" && network !== \"mesh\") {\n      error = \"Network should be 'sfu' or 'mesh'\";\n    } else if (!mapkey) {\n      error = \"No specific GoogleMapAPIkey\";\n    }\n\n    this.state = { key, mapkey, lat, lng, defaultZoom, network, room, error };\n  }\n\n  _onClick() {\n    const { participate, InitializeMap } = this.props;\n    const { key, mapkey, lat, lng, defaultZoom, network, room } = this.state;\n    this.setState({ isParticipating: true });\n    participate(key, network, room);\n    InitializeMap(mapkey, lat, lng, defaultZoom);\n  }\n\n  render() {\n    const { room, error, isParticipating } = this.state;\n\n    return (\n      <section className=\"participation\">\n        {error ? (\n          <label className=\"participation__error\">{error}</label>\n        ) : (\n          <button\n            className=\"participation__button\"\n            onClick={this._onClick}\n            disabled={isParticipating}\n          >\n            <label>participate to </label>\n            <label className=\"participation__room\">{room}</label>\n          </button>\n        )}\n      </section>\n    );\n  }\n}\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<TStore, void, AnyAction>\n) => ({\n  participate: (key: string, network: \"mesh\" | \"sfu\", room: string) => {\n    dispatch(participate(key, network, room));\n  },\n  InitializeMap: (\n    mapkey: string,\n    lat: number,\n    lng: number,\n    defaultZoom: number\n  ) => {\n    dispatch(InitializeMap(mapkey, lat, lng, defaultZoom));\n  },\n});\n\nexport default connect(null, mapDispatchToProps)(Participation);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { ThunkDispatch } from \"redux-thunk\";\nimport { AnyAction } from \"redux\";\n\nimport { TStore } from \"../store\";\nimport { selectPeer } from \"../actions\";\nimport { Member } from \"../types\";\n\nimport \"./AudienceItem.css\";\n\ninterface IProps {\n  audience: Member;\n  isMuted: boolean;\n  isSelected: boolean;\n  selectPeer: any;\n}\n\nclass AudienceItem extends React.PureComponent<IProps> {\n  // As video.playsInline is not defined in HTMLVideoElement, add \"any\" as well.\n  private _videoRef = React.createRef<HTMLVideoElement | any>();\n\n  constructor(props: IProps) {\n    super(props);\n\n    this._onClick = this._onClick.bind(this);\n  }\n\n  _onClick() {\n    const { audience, selectPeer } = this.props;\n    selectPeer(audience.peerId);\n  }\n\n  _updateVideo() {\n    const video = this._videoRef.current;\n    if (!video) {\n      return;\n    }\n\n    const { audience } = this.props;\n    video.srcObject = audience.stream;\n    video.playsInline = true;\n    video.play();\n  }\n\n  componentDidMount() {\n    this._updateVideo();\n  }\n\n  componentDidUpdate() {\n    this._updateVideo();\n  }\n\n  render() {\n    const { isMuted, isSelected } = this.props;\n\n    return (\n      <li\n        className={\n          \"audience-item \" + (isSelected ? \"audience-item--selected\" : \"\")\n        }\n        onClick={this._onClick}\n      >\n        <video\n          className=\"audience-item__video\"\n          muted={isMuted}\n          ref={this._videoRef}\n        />\n      </li>\n    );\n  }\n}\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<TStore, void, AnyAction>\n) => ({\n  selectPeer: (peerId: string) => {\n    dispatch(selectPeer(peerId));\n  },\n});\n\nexport default connect(null, mapDispatchToProps)(AudienceItem);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { TStore } from \"../store\";\nimport { Member } from \"../types\";\n\nimport AudienceItem from \"./AudienceItem\";\n\nimport \"./AudienceList.css\";\n\ninterface IProps {\n  audiences: Member[];\n  localPeer?: Peer;\n  presenter?: Member;\n}\n\nclass AudienceList extends React.PureComponent<IProps> {\n  render() {\n    const { audiences, localPeer, presenter } = this.props;\n\n    return (\n      <ul className=\"audience-list\">\n        {audiences.map(audience => (\n          <AudienceItem\n            key={audience.peerId}\n            audience={audience}\n            isMuted={audience.peerId === localPeer?.id}\n            isSelected={audience.peerId === presenter?.peerId}\n          />\n        ))}\n      </ul>\n    );\n  }\n}\n\nconst mapStateToProps = (store: TStore) => {\n  return {\n    audiences: store.state.audiences,\n    localPeer: store.state.localPeer,\n    presenter: store.state.presenter,\n  };\n};\n\nexport default connect(mapStateToProps)(AudienceList);\n","import React from \"react\";\nimport GoogleMapReact from \"google-map-react\";\nimport { connect } from \"react-redux\";\nimport { ThunkDispatch } from \"redux-thunk\";\nimport { AnyAction } from \"redux\";\n\nimport { TStore } from \"../store\";\nimport { toggleMapMuting } from \"../actions\";\nimport { InitializeMap } from \"../actions\";\nimport { Map } from \"../types\";\n\nimport \"./MapPanel.css\";\n\ninterface IProps {\n  map?: Map;\n  isMapEnabled: boolean;\n}\n\nclass MapPanel extends React.PureComponent<IProps> {\n  render() {\n    const { isMapEnabled, map } = this.props;\n    const className = isMapEnabled ? \"mappanel\" : \"mappanel--disabled\";\n\n    if (!map) {\n      return null;\n    }\n\n    return (\n      <div className={className}>\n        <GoogleMapReact\n          bootstrapURLKeys={{\n            key: map.key,\n          }}\n          defaultCenter={{\n            lat: map.lat,\n            lng: map.lng,\n          }}\n          defaultZoom={map.defaultZoom}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (store: TStore) => {\n  return {\n    isMapEnabled: store.state.isMapEnabled,\n    map: store.state.map,\n  };\n};\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<TStore, void, AnyAction>\n) => ({\n  InitializeMap: (\n    key: string,\n    lat: number,\n    lng: number,\n    defaultZoom: number\n  ) => {\n    dispatch(InitializeMap(key, lat, lng, defaultZoom));\n  },\n  toggleMapMuting: () => {\n    dispatch(toggleMapMuting());\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MapPanel);\n","import React from \"react\";\n\nimport logo from \"./Pointing.png\";\nimport \"./Pointing.css\";\nimport { Member } from \"../types\";\n\ninterface IProps {\n  audience: Member;\n  x: number;\n  y: number;\n  radian: number;\n}\n\nclass Pointing extends React.PureComponent<IProps> {\n  // As video.playsInline is not defined in HTMLVideoElement, add \"any\" as well.\n  private _videoRef = React.createRef<HTMLVideoElement | any>();\n\n  _updateVideo() {\n    const video = this._videoRef.current;\n    if (!video) {\n      return;\n    }\n\n    const { audience } = this.props;\n    video.srcObject = audience.stream;\n    video.playsInline = true;\n    video.play();\n  }\n\n  componentDidMount() {\n    this._updateVideo();\n  }\n\n  componentDidUpdate() {\n    this._updateVideo();\n  }\n\n  render() {\n    const { audience, x, y, radian } = this.props;\n\n    const angle = (radian * 180) / Math.PI;\n    const scale = angle > 0 ? -1 : 1;\n    const styles = {\n      left: `${x}px`,\n      top: `${y}px`,\n      transform: `translate(-60%, 0%) rotate(${angle}deg) scale(${scale}, 1)`,\n      transformOrigin: \"60% 0%\",\n    };\n\n    const videoStyles = {\n      transform: `scale(${angle > 0 ? -1 : 1}, 1) rotate(${-angle}deg)`,\n      transformOrigin: \"50%\",\n    };\n\n    return (\n      <mark className=\"pointing\" style={styles}>\n        <img className=\"pointing__image\" src={logo} alt={audience.peerId} />\n        <div className=\"pointing__audience\">\n          <video\n            className=\"pointing__audience__video\"\n            style={videoStyles}\n            muted={true}\n            ref={this._videoRef}\n          ></video>\n        </div>\n      </mark>\n    );\n  }\n}\n\nexport default Pointing;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { ThunkDispatch } from \"redux-thunk\";\nimport { AnyAction } from \"redux\";\n\nimport { TransformWrapper, TransformComponent } from \"react-zoom-pan-pinch\";\n\nimport { TStore } from \"../store\";\nimport { Member, Pointing, Transform } from \"../types\";\nimport { setPointing, setTransform } from \"../actions\";\nimport PointingComponent from \"./Pointing\";\n\nimport \"./Presenter.css\";\n\ninterface IProps {\n  localPeer?: Peer;\n  pointings: Pointing[];\n  presenter?: Member;\n  transform: Transform;\n  setPointing: any;\n  setTransform: any;\n}\n\nclass Presenter extends React.PureComponent<IProps> {\n  // As video.playsInline is not defined in HTMLVideoElement, add \"any\" as well.\n  private _videoRef = React.createRef<HTMLVideoElement | any>();\n\n  private _panStopTimer = 0;\n\n  constructor(props: IProps) {\n    super(props);\n\n    this._onClick = this._onClick.bind(this);\n    this._onPanningStop = this._onPanningStop.bind(this);\n    this._onZoomChange = this._onZoomChange.bind(this);\n  }\n\n  _amIPresenter() {\n    const { localPeer, presenter } = this.props;\n\n    if (!localPeer || !presenter) {\n      return false;\n    }\n\n    return localPeer.id === presenter.peerId;\n  }\n\n  _getVideoArea() {\n    const video = this._videoRef.current;\n    return video?.closest(\".react-transform-component\");\n  }\n\n  _isMobile() {\n    return /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(\n      navigator.userAgent.toLowerCase()\n    );\n  }\n\n  _onClick(e: any) {\n    const { target, layerX, layerY } = e;\n    const { clientWidth, clientHeight } = target;\n    const x = layerX / clientWidth;\n    const y = layerY / clientHeight;\n    this.props.setPointing(x, y);\n  }\n\n  /**\n   * NOTE: This function is for following issue.\n   * After fixing following issue, need to address for it.\n   * https://github.com/prc5/react-zoom-pan-pinch/issues/89\n   */\n  _onPanningStop() {\n    this._panStopTimer = window.setTimeout(() => {\n      const video = this._videoRef.current;\n      if (!video) {\n        return;\n      }\n\n      const transformElement = video.closest(\".react-transform-element\");\n      const transform = transformElement.style.transform.match(\n        /translate\\((.*)\\) scale\\((.*)\\)/\n      );\n      const translate = transform[1];\n      const translateMatch = translate.match(/(.*), (.*)/);\n      const positionX = parseFloat(\n        translateMatch ? translateMatch[1] : translate\n      );\n      const positionY = parseFloat(\n        translateMatch && translateMatch.length === 3 ? translateMatch[2] : 0\n      );\n      const scale = parseFloat(transform[2]);\n      this._onZoomChange({ positionX, positionY, scale });\n    }, 500);\n  }\n\n  _onZoomChange(e: any) {\n    window.clearTimeout(this._panStopTimer);\n\n    const area = this._getVideoArea();\n    const { positionX, positionY, scale } = e;\n    const { clientWidth, clientHeight } = area;\n    const x = positionX / clientWidth;\n    const y = positionY / clientHeight;\n    this.props.setTransform(x, y, scale);\n  }\n\n  _renderPointings() {\n    const area = this._getVideoArea();\n    if (!area) {\n      return null;\n    }\n\n    const { pointings } = this.props;\n    return pointings.map(p => {\n      const audience = p.audience;\n      const x = area.offsetLeft + area.clientWidth * p.x;\n      const y = area.offsetTop + area.clientHeight * p.y;\n      const radian = Math.atan2(p.x - 0.5, -(p.y - 0.5));\n\n      return (\n        <PointingComponent\n          key={audience.peerId}\n          audience={audience}\n          x={x}\n          y={y}\n          radian={radian}\n        />\n      );\n    });\n  }\n\n  componentDidMount() {\n    const area = this._getVideoArea();\n    if (!area) {\n      return null;\n    }\n\n    // We can't get layerX/layerY from React mouse event.\n    area.addEventListener(\"click\", this._onClick);\n  }\n\n  componentDidUpdate(prevProps: IProps) {\n    const video = this._videoRef.current;\n    if (!video) {\n      return;\n    }\n\n    const { presenter } = this.props;\n    if (prevProps.presenter === presenter) {\n      return;\n    }\n\n    if (presenter) {\n      video.muted = this._amIPresenter();\n      video.srcObject = presenter.stream;\n      video.playsInline = true;\n      video.play();\n    } else {\n      video.srcObject = null;\n    }\n  }\n\n  render() {\n    const area = this._getVideoArea();\n\n    const settings =\n      this._amIPresenter() && this._isMobile()\n        ? {\n            onPanningStop: this._onPanningStop,\n            onZoomChange: this._onZoomChange,\n            pan: {\n              disabled: false,\n            },\n          }\n        : {\n            positionX: area?.clientWidth * this.props.transform.x,\n            positionY: area?.clientHeight * this.props.transform.y,\n            scale: this.props.transform.scale,\n            pan: {\n              disabled: true,\n            },\n          };\n\n    return (\n      <section className=\"presenter\">\n        <TransformWrapper\n          onPanning={settings.onZoomChange}\n          onPanningStop={settings.onPanningStop}\n          onZoomChange={settings.onZoomChange}\n          positionX={settings.positionX}\n          positionY={settings.positionY}\n          scale={settings.scale}\n          pan={settings.pan}\n          doubleClick={{ disabled: true }}\n        >\n          <TransformComponent>\n            <video className=\"presenter__video\" ref={this._videoRef}></video>\n          </TransformComponent>\n        </TransformWrapper>\n        {this._renderPointings()}\n      </section>\n    );\n  }\n}\n\nconst mapStateToProps = (store: TStore) => {\n  return {\n    localPeer: store.state.localPeer,\n    pointings: store.state.pointings,\n    presenter: store.state.presenter,\n    transform: store.state.transform,\n  };\n};\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<TStore, void, AnyAction>\n) => ({\n  setPointing: (x: number, y: number) => {\n    dispatch(setPointing(x, y));\n  },\n  setTransform: (x: number, y: number, scale: number) => {\n    dispatch(setTransform(x, y, scale));\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Presenter);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { ThunkDispatch } from \"redux-thunk\";\nimport { AnyAction } from \"redux\";\n\nimport { TStore } from \"../store\";\nimport { toggleAudioMuting } from \"../actions\";\n\nimport logoEnabled from \"./AudioMuting.svg\";\nimport logoDisabled from \"./AudioMutingDisabled.svg\";\nimport \"./AudioMuting.css\";\n\ninterface IProps {\n  isAudioEnabled: boolean;\n  toggleAudioMuting: any;\n}\n\nclass AudioMuting extends React.PureComponent<IProps> {\n  render() {\n    const { isAudioEnabled } = this.props;\n    const logo = isAudioEnabled ? logoEnabled : logoDisabled;\n\n    return (\n      <button onClick={this.props.toggleAudioMuting} className=\"audio-muting\">\n        <img\n          src={logo}\n          alt=\"mute/unmute audio\"\n          className=\"audio-muting__image\"\n        />\n      </button>\n    );\n  }\n}\n\nconst mapStateToProps = (store: TStore) => {\n  return {\n    isAudioEnabled: store.state.isAudioEnabled,\n  };\n};\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<TStore, void, AnyAction>\n) => ({\n  toggleAudioMuting: () => {\n    dispatch(toggleAudioMuting());\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AudioMuting);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { ThunkDispatch } from \"redux-thunk\";\nimport { AnyAction } from \"redux\";\n\nimport { TStore } from \"../store\";\nimport { toggleCameraMuting } from \"../actions\";\n\nimport logoEnabled from \"./CameraMuting.svg\";\nimport logoDisabled from \"./CameraMutingDisabled.svg\";\nimport \"./CameraMuting.css\";\n\ninterface IProps {\n  isCameraEnabled: boolean;\n  toggleCameraMuting: any;\n}\n\nclass CameraMuting extends React.PureComponent<IProps> {\n  render() {\n    const { isCameraEnabled } = this.props;\n    const logo = isCameraEnabled ? logoEnabled : logoDisabled;\n\n    return (\n      <button onClick={this.props.toggleCameraMuting} className=\"camera-muting\">\n        <img\n          src={logo}\n          alt=\"mute/unmute camera\"\n          className=\"camera-muting__image\"\n        />\n      </button>\n    );\n  }\n}\n\nconst mapStateToProps = (store: TStore) => {\n  return {\n    isCameraEnabled: store.state.isCameraEnabled,\n  };\n};\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<TStore, void, AnyAction>\n) => ({\n  toggleCameraMuting: () => {\n    dispatch(toggleCameraMuting());\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CameraMuting);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { ThunkDispatch } from \"redux-thunk\";\nimport { AnyAction } from \"redux\";\n\nimport { TStore } from \"../store\";\nimport { toggleMapMuting } from \"../actions\";\n\nimport logoEnabled from \"./MapMuting.svg\";\nimport logoDisabled from \"./MapMutingDisabled.svg\";\nimport \"./MapMuting.css\";\n\ninterface IProps {\n  isMapEnabled: boolean;\n  toggleMapMuting: any;\n}\n\nclass MapMuting extends React.PureComponent<IProps> {\n  render() {\n    const { isMapEnabled } = this.props;\n    const logo = isMapEnabled ? logoEnabled : logoDisabled;\n\n    return (\n      <button onClick={this.props.toggleMapMuting} className=\"map-muting\">\n        <img src={logo} alt=\"mute/unmute map\" className=\"map-muting__image\" />\n      </button>\n    );\n  }\n}\n\nconst mapStateToProps = (store: TStore) => {\n  return {\n    isMapEnabled: store.state.isMapEnabled,\n  };\n};\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<TStore, void, AnyAction>\n) => ({\n  toggleMapMuting: () => {\n    dispatch(toggleMapMuting());\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MapMuting);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { ThunkDispatch } from \"redux-thunk\";\nimport { AnyAction } from \"redux\";\n\nimport { TStore } from \"../store\";\nimport { switchCamera } from \"../actions\";\n\nimport logo from \"./CameraSwitching.svg\";\nimport \"./CameraSwitching.css\";\n\ninterface IProps {\n  switchCamera: any;\n}\n\nclass CameraSwitching extends React.PureComponent<IProps> {\n  render() {\n    return (\n      <button onClick={this.props.switchCamera} className=\"camera-switching\">\n        <img\n          src={logo}\n          alt=\"switch camera\"\n          className=\"camera-switching__image\"\n        />\n      </button>\n    );\n  }\n}\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<TStore, void, AnyAction>\n) => ({\n  switchCamera: () => {\n    dispatch(switchCamera());\n  },\n});\n\nexport default connect(null, mapDispatchToProps)(CameraSwitching);\n","import React from \"react\";\n\nimport \"./ToolItem.css\";\n\ninterface IProps {\n  children: React.ReactNode;\n}\n\nclass ToolItem extends React.PureComponent<IProps> {\n  render() {\n    const { children } = this.props;\n\n    return <li className=\"tool-item\">{children}</li>;\n  }\n}\n\nexport default ToolItem;\n","import React from \"react\";\n\nimport AudioMuting from \"./AudioMuting\";\nimport CameraMuting from \"./CameraMuting\";\nimport MapMuting from \"./MapMuting\";\nimport CameraSwitching from \"./CameraSwitching\";\nimport ToolItem from \"./ToolItem\";\n\nimport \"./ToolList.css\";\n\nclass ToolList extends React.PureComponent {\n  render() {\n    return (\n      <ul className=\"tool-list\">\n        <ToolItem>\n          <CameraSwitching />\n        </ToolItem>\n        <ToolItem>\n          <MapMuting />\n        </ToolItem>\n        <ToolItem>\n          <CameraMuting />\n        </ToolItem>\n        <ToolItem>\n          <AudioMuting />\n        </ToolItem>\n      </ul>\n    );\n  }\n}\n\nexport default ToolList;\n","import React from \"react\";\n\nimport AudienceList from \"./AudienceList\";\nimport MapPanel from \"./MapPanel\";\nimport Presenter from \"./Presenter\";\nimport ToolList from \"./ToolList\";\n\nimport \"./Room.css\";\n\nclass Room extends React.PureComponent {\n  render() {\n    return (\n      <section className=\"room\">\n        <ToolList />\n        <Presenter />\n        <MapPanel />\n        <AudienceList />\n      </section>\n    );\n  }\n}\n\nexport default Room;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { TStore } from \"../store\";\n\nimport Participation from \"./Participation\";\nimport Room from \"./Room\";\n\nimport \"./App.css\";\n\ninterface IProps {\n  room: any;\n}\n\nclass App extends React.PureComponent<IProps> {\n  render() {\n    return (\n      <React.Fragment>\n        {this.props.room ? <Room /> : <Participation />}\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = (store: TStore) => {\n  return {\n    room: store.state.room,\n  };\n};\n\nexport default connect(mapStateToProps)(App);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\n\nimport { store } from \"./store\";\n\nimport App from \"./components/App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}